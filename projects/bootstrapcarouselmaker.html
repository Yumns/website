<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bootstrap Carousel Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <style>
        body {
            background-color: #dadada;
        }

        h1 {
            text-align: center;
            font-family: IBM Plex Mono, monospace;
            font-size: 240%;
            margin-bottom: 0;
            color: white;
            background-color: #8783f7;
            vertical-align: bottom;
        }

        a {
            text-align: center;
        }

        label, strong {
            font-family: IBM Plex Mono, monospace;
        }

        textarea {
            object-fit: fill;
            border: #4f4f4f solid;
            border-width: 0 0 2px 0;
            background-color: #e1e1e1;
            min-height: 22vh;
        }

        input {
            border-radius: 0;
            border-width: 2px 0 0 0;
            background-color: #e1e1e1;
            border-color: #4f4f4f;
        }

        #carouselName {
            border-width: 2px 0 0 2px;
        }
        a >span:hover {
            text-decoration: underline black;
        }
        button {
            padding: 0;
            border: solid #4f4f4f;
            border-width: 2px 0 0 2px;
            background-color: #efefef;
        }

        button > span {
            margin-top: 10%;
        }
    </style>
</head>
<body>
<div class="container pt-5">
    <div class="row mt-5 p-0 align-items-center justify-content-center">
        <div style="border: 2px solid #4f4f4f" class="col-xl-8 col-md-12 col-lg-10 row p-0 shadow-lg">
            <div class="group row p-0 m-0">
                <h1 class="col-10 p-0">Bootstrap Carousel Generator</h1>
                <a style="background-color: #8278f2;" class="col-2 p-0 m-0"
                   href="https://yumns.github.io#prj">
                    <span style="font-size: 4vh; color:black; background-color: #8278f2;" class="m-0 p-0 material-icons-sharp">close</span></a>
            </div>
            <div class="row p-0 m-0">
                <textarea placeholder="File names" id="namesIn"></textarea>
            </div>
            <form id="form" autocomplete="off">
                <div class="row mt-2">
                    <div class="col-sm-12 col-md-3">
                        <strong>Transition</strong>
                        <div class="d-block">
                            <input id="transitionnone" type="radio" name="transition" value="carousel">
                            <label for="transitionnone">None</label>
                        </div>
                        <div class="d-block">
                            <input id="transitionslide" type="radio" name="transition" value="carousel slide"
                                   checked="checked">
                            <label for="transitionslide">Slide</label>
                        </div>
                        <div class="d-block">
                            <input id="transitionfade" type="radio" name="transition"
                                   value="carousel slide carousel-fade">
                            <label for="transitionfade">Fade</label>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-3">
                        <strong>Autoscroll</strong>
                        <div class="d-block">
                            <input type="radio" id="autoscrollnone" name="autoscroll" value="">
                            <label for="autoscrollnone">None</label>
                        </div>
                        <div class="d-block">
                            <input type="radio" id="autoscrollauto" name="autoscroll" value='data-bs-ride="carousel"'>
                            <label for="autoscrollauto">Auto</label>
                        </div>
                        <div class="d-block">
                            <input type="radio" id="autoscrollclick" name="autoscroll" value='data-bs-ride="true"'
                                   checked="checked">
                            <label for="autoscrollclick">On Click</label>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-6 row mb-2">
                        <strong>Options</strong>
                        <div class="col-sm-12 col-md-6">
                            <div class="group">
                                <input type="checkbox" id="lazyloading" name="lazyloading" value=1>
                                <label for="lazyloading">Lazy Loading</label>
                            </div>
                            <div class="group">
                                <input type="checkbox" id="indicators" name="indicators" value=1>
                                <label for="indicators">Indicators</label>
                            </div>
                            <div class="group">
                                <input type="checkbox" id="compact" name="compact" value=1>
                                <label for="compact">Compact Code</label>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-6">
                            <div class="group">
                                <input type="checkbox" id="swipes" name="disableTouchSwiping" value="1">
                                <label for="swipes">Disable Touch Swiping</label>
                            </div>
                            <div class="group">
                                <input type="checkbox" id="nocontrols" name="nocontrols" value="1">
                                <label for="nocontrols">No Controls</label>
                            </div>
                        </div>
                    </div>
                    <div class="row p-0 m-0">
                        <div class="col-7 row p-0 m-0">
                            <input name="filepath" type="text" id="filepath" placeholder="Picture folder">
                        </div>
                        <div class="col-3 row p-0 m-0">
                            <input name="carouselName" type="text" id="carouselName" placeholder="Carousel name">
                        </div>
                        <div class="col-2 row m-0 p-0">
                            <div class="row col-4 m-0 p-0">
                                <button class="p-0" type="submit"><span
                                        class="material-icons-sharp">keyboard_return</span></button>
                            </div>
                            <div class="row col-4 m-0 p-0">
                                <button class="p-0" type="button" class="button" onclick="copyText()"><span
                                        class="material-icons-sharp">content_copy</span></button>
                            </div>
                            <div class="row col-4 m-0 p-0">
                                <button class="p-0" type="reset" onclick="resetTextArea()"><span
                                        class="material-icons-sharp">refresh</span></button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<pre id="log" style="opacity: 0%"></pre>
<script>
    function resetTextArea() {
        document.getElementById("namesIn").value = ""
    }

    const form = document.getElementById("form");
    const log = document.getElementById("log");

    form.addEventListener(
        "submit",
        (event) => {
            let properties = {
                filepath: "",
                carouselName: String(Math.round((Math.random() * Math.random() * 10 ** 16))),
                transition: "slide",
                autoscroll: "data-bs-ride='true'",
                lazyloading: "",
                indicators: 0,
                compact: 0,
                disabletouch: "",
                nocontrols: 0
            }
            const data = new FormData(form);
            let output = "";
            for (const entry of data) {
                output = `${output}${entry[0]}=${entry[1]}\r`;
                if (entry[0] === "transition") {
                    properties.transition = entry[1]
                }
                if (entry[0] === "autoscroll") {
                    properties.autoscroll = entry[1]
                }
                if (entry[0] === "lazyloading") {
                    properties.lazyloading = "loading=\"lazy\""
                }
                if (entry[0] === "indicators") {
                    properties.indicators = 1
                }
                if (entry[0] === "compact") {
                    properties.compact = 1
                }
                if (entry[0] === "disableTouchSwiping") {
                    properties.disabletouch = "data-bs-touch='false'"
                }
                if (entry[0] === "nocontrols") {
                    properties.nocontrols = 1
                    properties.autoscroll = "data-bs-ride='carousel"
                }
                if (entry[0] === "filepath" && entry[1] !== "") {
                    properties.filepath = entry[1] + "/"
                }
                if (entry[0] === "carouselName" && entry[1] !== "") {
                    properties.carouselName = entry[1]
                }
            }
            log.innerText = JSON.stringify(properties);
            event.preventDefault();
            let innards = ""
            let names = document.getElementById("namesIn").value.split("\n")
            for (i in names) {
                innards += `<div class="carousel-item">
  <img src="${properties.filepath}${names[i]}" class="d-block w-100" alt="image from ${properties.filepath}" ${properties.lazyloading}>
</div>
    `
            }
            if (properties.disabletouch !== "data-bs-touch='false") {
                controls = `
        <button class="carousel-control-prev" type="button" data-bs-target="#${properties.carouselName}"
                               data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#${properties.carouselName}" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>`
            }
            codeOut = (`
<div id="${properties.carouselName}" class="${properties.transition}" ${properties.disabletouch} ${properties.autoscroll}>
  <div class="carousel-inner">
    ${innards}
  </div>
  ${controls}
</div>
  `).replace('class="carousel-item"', 'class="carousel-item active"').trim()
            if (properties.compact === 1) {
                codeOut = codeOut.replace(/[\n\r\t\s]+/g, ' ').trim()
            }
            document.getElementById("namesIn").value = codeOut
        },
        false
    );

    function copyText() {
        document.getElementById("namesIn").select()
        document.getElementById("namesIn").setSelectionRange(0, 99999)
        navigator.clipboard.writeText(document.getElementById("namesIn").value)
    }

</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
</body>
</html>